{"version":17,"entities":[{"location":[-547.120877402688,7.2613594352177415],"size":[92,76],"text":"行为","uuid":"e22879ff-6af5-4024-86dd-046271cbcf1c","details":"行为是什么？\n\n行为是目标进行的行动，例如玩家打出卡牌，丢弃卡牌，使用药水，使用器官\n\n遗物产生效果算吗？应该是玩家使用遗物（或主动或被动）\n\n行为会以过程事件的形式\n\n行为通常涉及3个目标：行为发起者，行为媒介，行为目标\n\n例如：玩家对小石怪使用卡牌打击\n\n1.来源：玩家，媒介：打击卡牌，目标：小石怪\n2.调用卡牌的“使用”行为（对象方法）：\n\n1. 1.获取“使用”行为对应的效果\n   2.产生一个“使用卡牌\"过程事件，并触发该过程事件\n2. `{ 来源：玩家， 媒介：打击卡牌， 目标：小石怪， 效果：卡牌的使用效果 }`\n3. 3.使用该过程事件，对目标造成卡牌的效果\n\n\n又或者分开来？\n\n行为触发器和效果触发器？\n\n行为是一个事件，效果的触发也是一个事件\n\n应该这么说：行为事件和效果事件\n","color":[0,0,0,0],"type":"core:text_node","sizeAdjust":"auto"},{"location":[-348.00450177411756,-311.7969245604967],"size":[124,76],"text":"触发器","uuid":"b183e091-cbd1-4ea0-b796-8e0c10fe5578","details":"## 触发器是什么？\n\n触发器是某个对象对游戏内的过程事件进行监听，并进行反馈的函数集合\n\n触发器分为3种\n\n主动触发make\n\n被动触发take\n\n总是触发on：通常出现在物品上，例如on:use，on:throw\n\n分别表示对象在过程事件中是造成事件的一方，或承受事件的一方，或在两种情况下都会触发\n\n## 触发器如何产生作用？\n\n对象在接受到触发信号和对应的过程事件，以过程事件为参数，调用对应的函数\n\n例如 角色受到了10点伤害，将会触发：take “造成伤害” 触发器\n","color":[0,0,0,0],"type":"core:text_node","sizeAdjust":"auto"},{"location":[-579.120877402688,-311.7969245604967],"size":[156,76],"text":"过程事件","uuid":"8a8d1f62-ec7b-4c54-aac4-3b09e48e7b4f","details":"过程事件\n\n过程事件是调用触发器的重要参数，其本质上是记录发生了什么的对象\n\n分为行为和效果都会构建过程事件，并借此调用触发器，此外效果本身还会接受过程事件作为参数\n\n行为事件\n\n1.事件来源：发起这个事件的目标\n2.事件目标：接受这个事件的目标\n3.效果媒介：产生这个效果的目标或物品\n4.事件效果：这个事件会产生的效果\n\n触发该事件并传入触发key，触发key通常是行为的key或效果的key\n\n1.事件来源 make \"key\" 到 效果媒介\n2.效果媒介 on \"key“ 来自 事件来源\n3.事件目标 take \"key\" 来自 事件来源\n","color":[0,0,0,0],"type":"core:text_node","sizeAdjust":"auto"},{"location":[-348.00450177411756,8.823371306507966],"size":[92,76],"text":"效果","uuid":"e96510a1-f118-43f8-81f0-73a0f76d92fa","details":"# 效果\n\n效果是一个对象，其包含一个对【过程事件】产生反应的函数\n\n这个函数接受一个过程事件作为参数，并对其中的对象进行修改，有时效果本身也作为过程事件的参数\n\n例如：\n\n```ts\n{\n  label:\"造成伤害\",\n  value:10,\n    effect:({source,medium,target,effect})=>{\n      使得target受到伤害，伤害值为value\n    }\n}\n```\n\n**效果是过程事件对游戏内容产生影响的介质**\n\n过程事件只是一个记录性质的对象，其并不会实际地对游戏内容产生改变\n\n### 产生效果时，也会创建过程事件\n\n这是因为产生效果本质上也是一次事件，并且需要进行相应的触发，例如：\n\n【角色】使用【火焰药水】对【小石怪】【造成10点伤害】\n\n在处理这个效果时，会收到一个过程事件与这个效果自身：\n\n```ts\n{\n    source:角色,\n    medium:火焰药水,\n    target:小石怪,\n    effect:……\n},\neffect:造成伤害\n```\n\n过程事件中的effect参数在当前情况下就是效果本身，但此时我们假设其是任意一个效果\n\n我们从过程事件中提取【造成伤害】效果的来源、媒介和目标，然后用【造成伤害】效果将其组合为一个过程事件，接着触发该过程事件，触发关键词为\"造成伤害“\n\n此时我们就使得source:角色接受到了”make 造成伤害”的触发\n使得target:小石怪接受到了“take 造成伤害”的触发\n\n## 效果作用的目标是效果\n\n例如“减少受到的伤害”，会使得自身受到的伤害效果的value减少\n那么其target应该是Effect吗？那么source又该是什么？\n或者这么说，某个效果是一个“触发器效果”，其只会在触发器内被调用，触发器内必定会传入调用该触发的效果，因此其也必定会接收到一个效果\n\n或者更实际一点：【石肤】器官的效果是：生效时，令自身受到的伤害-1\n\n这个效果应该如何作用？\n1.在【石肤】器官生效时，为自身添加触发器：【before 受到伤害：伤害效果值-1】\n2.自身受到伤害效果，产生“伤害事件”，其目标是自身\n3.before take 伤害触发器被触发，传入上述的”伤害事件“其中包含伤害效果\n4.在回调函数中获取这个效果，并将其效果值-1\n5.伤害效果触发，对自身造成效果值-1后的伤害\n\n效果来源：【石肤】器官\n效果目标：自身\n效果内容：生效时，为自身添加触发器：【before 受到伤害：伤害效果值-1】\n\n【伤害效果值-1】是一个效果吧？？？这个效果的来源和目标分别是什么？？？\n\n效果要怎么传递一个过程事件？？？\n\n比如上述的例子，媒介是什么？？？是器官吗？是\n","color":[0,0,0,0],"type":"core:text_node","sizeAdjust":"auto"},{"location":[-348.00450177411756,169.71059404940087],"size":[92,76],"text":"目标","uuid":"240f65f4-a1df-4455-980f-37b946be6551","details":"游戏内的目标分为3中：器官，角色，敌人\n","color":[0,0,0,0],"type":"core:text_node","sizeAdjust":"auto"},{"location":[-553.368924887851,169.71059404940087],"size":[92,76],"text":"物品","uuid":"1b099440-f992-4711-82ab-71e0a4f3cd1a","details":"物品在通常情况下都是\n","color":[0,0,0,0],"type":"core:text_node","sizeAdjust":"auto"}],"associations":[{"source":"e22879ff-6af5-4024-86dd-046271cbcf1c","target":"8a8d1f62-ec7b-4c54-aac4-3b09e48e7b4f","text":"","uuid":"bc23afb8-4537-4be4-aae9-acc451ed207c","type":"core:line_edge","color":[0,0,0,0],"sourceRectRate":[0.5,0.5],"targetRectRate":[0.5,0.5]},{"source":"8a8d1f62-ec7b-4c54-aac4-3b09e48e7b4f","target":"e96510a1-f118-43f8-81f0-73a0f76d92fa","text":"","uuid":"cfa72d6c-962b-41ab-9aea-e583fde45456","type":"core:line_edge","color":[0,0,0,0],"sourceRectRate":[0.5,0.5],"targetRectRate":[0.5,0.5]},{"source":"b183e091-cbd1-4ea0-b796-8e0c10fe5578","target":"e96510a1-f118-43f8-81f0-73a0f76d92fa","text":"","uuid":"fc9bc9a2-38d1-4135-8074-89746eeb1d95","type":"core:line_edge","color":[0,0,0,0],"sourceRectRate":[0.5,0.5],"targetRectRate":[0.5,0.5]},{"source":"8a8d1f62-ec7b-4c54-aac4-3b09e48e7b4f","target":"b183e091-cbd1-4ea0-b796-8e0c10fe5578","text":"","uuid":"734ffb56-0f81-407c-a2f8-79065105eea6","type":"core:line_edge","color":[0,0,0,0],"sourceRectRate":[0.5,0.5],"targetRectRate":[0.5,0.5]},{"source":"e96510a1-f118-43f8-81f0-73a0f76d92fa","target":"8a8d1f62-ec7b-4c54-aac4-3b09e48e7b4f","text":"","uuid":"9c087558-25ac-446a-b52f-5a584673ed9a","type":"core:line_edge","color":[0,0,0,0],"sourceRectRate":[0.5,0.5],"targetRectRate":[0.5,0.5]},{"source":"b183e091-cbd1-4ea0-b796-8e0c10fe5578","target":"240f65f4-a1df-4455-980f-37b946be6551","text":"","uuid":"801d3708-9d98-46cf-a269-8115624ff435","type":"core:line_edge","color":[0,0,0,0],"sourceRectRate":[0.5,0.5],"targetRectRate":[0.5,0.5]},{"source":"b183e091-cbd1-4ea0-b796-8e0c10fe5578","target":"1b099440-f992-4711-82ab-71e0a4f3cd1a","text":"","uuid":"77b9e7bd-69d1-45f5-8e0e-cd91c3072e1a","type":"core:line_edge","color":[0,0,0,0],"sourceRectRate":[0.5,0.5],"targetRectRate":[0.5,0.5]},{"source":"240f65f4-a1df-4455-980f-37b946be6551","target":"8a8d1f62-ec7b-4c54-aac4-3b09e48e7b4f","text":"","uuid":"43d0808c-a59c-45bd-b264-1452f5bab052","type":"core:line_edge","color":[0,0,0,0],"sourceRectRate":[0.5,0.5],"targetRectRate":[0.5,0.5]},{"source":"1b099440-f992-4711-82ab-71e0a4f3cd1a","target":"8a8d1f62-ec7b-4c54-aac4-3b09e48e7b4f","text":"","uuid":"00936b03-1229-46a5-b955-d701c1dd150d","type":"core:line_edge","color":[0,0,0,0],"sourceRectRate":[0.5,0.5],"targetRectRate":[0.5,0.5]},{"source":"1b099440-f992-4711-82ab-71e0a4f3cd1a","target":"e22879ff-6af5-4024-86dd-046271cbcf1c","text":"","uuid":"246c6456-d7a4-4cc9-8aed-0362d82fb6f8","type":"core:line_edge","color":[0,0,0,0],"sourceRectRate":[0.5,0.5],"targetRectRate":[0.5,0.5]},{"source":"240f65f4-a1df-4455-980f-37b946be6551","target":"e22879ff-6af5-4024-86dd-046271cbcf1c","text":"","uuid":"2e5a16d1-83d0-4afd-b639-efb36c635d86","type":"core:line_edge","color":[0,0,0,0],"sourceRectRate":[0.5,0.5],"targetRectRate":[0.5,0.5]}],"tags":["e22879ff-6af5-4024-86dd-046271cbcf1c","b183e091-cbd1-4ea0-b796-8e0c10fe5578","8a8d1f62-ec7b-4c54-aac4-3b09e48e7b4f","e96510a1-f118-43f8-81f0-73a0f76d92fa"]}