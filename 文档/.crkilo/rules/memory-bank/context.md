# Born The Spire - 当前状态

## 当前工作焦点

核心系统架构已完成，当前专注于：
1. **卡牌系统完善**: 卡牌效果、词条修饰器、参数计算
2. **房间系统开发**: 战斗、黑市、水池、事件等房间类型
3. **UI 优化**: 交互体验、动画效果、调试工具

## 最近完成的工作

### 2025/12/7
- 实现了卡牌打出和造成伤害的功能
- 修复了能量消耗事件阶段目标映射问题
- 修复了事件和效果执行顺序问题
- 完善了能量不足时的回调机制

### 2025/11/22
- 完成了触发器和关键触发器系统
- 实现了当前值Current系统，用于管理全局或战斗内的当前值
- 实现了事务性的增删改查接口
- 建立了与属性系统的联动

### 2025/11/12
- 完成了status属性修饰器
- 实现了前端对属性的响应式获取
- 完成了修饰器基类

### 2025/11/02
- 添加了事务队列，用于顺序处理同步的非关联事件
- 修复了抽牌和回合开始的bug
- 测试了多次选择功能

### 2025/10/28 - 10/31
- 完成了选择目标方法
- 实现了事件的阶段phase机制
- 完成了阵营选择框组件
- 实现了卡牌使用的全流程

## 下一步计划

### 短期目标
1. 完善当前值Current的maxBy和minBy功能
2. 实现卡牌参数与属性值的联动
3. 完善item获取修饰器（药水、金钱、卡牌、遗物）
4. 实现state状态修饰器和器官修饰器
5. 完成效果参数计算系统

### 中期目标
1. 完善器官系统（临时器官、器官变化）
2. 实现战斗流程（玩家回合、敌人回合）
3. 实现爬塔流程（房间抽取、各类房间）
4. 优化日志系统和调试工具
5. 实现卡牌拖拽使用

### 长期目标
1. 完善房间系统（水池、黑市、事件等）
2. 实现存档系统
3. 添加更多卡牌、敌人、器官
4. 实现成就系统
5. 模组支持

## 已知问题

- 触发事件是否会被正确收集到同一个事务中需要进一步测试
- 卡牌使用取消时的回卷机制尚未实现
- 治疗heal效果尚未完全实现
- 器官修饰器的卸载机制需要完善
- 状态层数减少时的自减机制需要解决