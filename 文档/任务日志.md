进度一览：
    2026/01/14：完成词条系统修复、卡牌管理系统重构
    2026/01/10：完成 State 状态系统、治疗效果、药水示例
    2025/12/7：可以打出牌并造成伤害了（又一次



2026.01.14
词条系统修复完成：
- 修复 bug：器官提供的卡牌没有进入抽牌堆
  - 根本原因：CardModifier 使用 WeakMap 但未使用 toRaw() 处理 Vue 响应式对象
  - 解决方案：在 getCardModifier() 和 initCardModifier() 中使用 toRaw()
- 修复 bug：【固有】词条效果未正确生效
  - 根本原因：EntryModifier 同样的 WeakMap 问题
  - 解决方案：在 getEntryModifier() 和 initEntryModifier() 中使用 toRaw()

卡牌管理系统重构：
- 移除冗余的 player.cards 属性
- CardModifier 成为卡牌管理的唯一数据源
- 添加 CardModifier.getAllCards() 方法
- 更新 Player 类的相关方法使用 CardModifier

UI 修复：
- Card.vue 组件改用 EntryModifier 获取词条信息
- 移除已废弃的 card.entry 属性引用

2026.01.10
State 状态系统完成：
- State 基础类、StateModifier 管理器
- 层数自动变化（stackChange）、触发器机制（interaction.possess）
- Effect 函数：applyState、removeState、changeStateStack
- 示例状态：力量、中毒、虚弱、易伤

治疗效果完成：
- heal 效果已实现并注册到 effectMap

药水示例：
- 创建火焰药水（对敌人造成20点伤害）
- 创建瓶中精灵（死亡复活，等待战斗系统完善后实现）

2025.12.7
bug:卡牌没有消耗玩家能量=>
    这是因为事件阶段没有指名效果的对象，对某个对象使用卡牌的同时会支付自己的能量
    =>事件阶段的目标与事件指定的目标不一致！
    =>事件阶段应该可以指定目标才对！
    =>修好了，事件阶段可以指定目标映射了
    =>还是没有减少玩家的能量
        =>ok
bug:事件的阶段效果在事件的发生之前先发生了，这不对，应该是事件=>事件效果
    =>修好了，同步事件导致的顺序问题
bug:能量不足时应当触发回调=>禁止使用卡牌+回到手牌=>ok通过阶段条件返回break终止后续阶段
energy效果=>不报错了！但具体的逻辑还是不对！涉及属性变更和属性修饰器
    =>energy效果做好啦~
bug:事件阶段过程中进行了一次映射修改了事件对象，导致之后的所有阶段都使用该次实体映射后的事件对象
    =>为某个阶段的效果对象提供了拷贝的事件对象并覆盖映射
        =>风险点：拷贝的事件对象无法执行事件方法！

2025.11.22
完善了触发器和关键触发器（的一部分）
当前值current：用于管理全局或战斗内的“当前值”的系统，通过挂载触发器来实现在特定时间刷新等功能
    另外还提供事务性的操作，例如增删改查等接口
    此外还与属性系统联动，可以用属性来限制其边界值，并且在一部分情况下实现与属性联动修改（例如：最大生命值提升时，也可以选择提升当前生命”）
    效果对属性的获取/操作=>需要等待当前值的更新
    生命值和能量要提出来实现……？
        =>当前生命是事务属性，不是一个Status，对Entity来说，诸如“最大生命”等才是属性值Status
    =>如何挂载到实体上？
        =>1.创建当前值对象，挂载到实体上
        =>2.创建对应的触发器，挂载到实体上，同步触发器信息到当前值对象上
    =>创建和挂载做完了

2025.11.12
大致完成了status属性修饰器,获取对应属性时就更新全部
        =>属性的定义是什么？是对象身上的某些记录性质的内容，可以被随时修改计算！
        =>生命值和能量这类是的定义是什么？=>资源
        =>属性的操作流程是什么？
    前端对属性的获取=>通过返回ref类型的属性值实现前端响应式
    对象的预制属性=>稍稍修改即可
修饰器
    修饰器基类

顺序计算和独立乘区到底要怎么做？
谁先算，谁后算？
属性不做独立乘区，效果值的计算做独立乘区
    =>为什么我需要snapshot
        =>因为基础值区的值发生改变时，current区计算会出现问题
            =>为什么我需要将基础区和current区区分开来？
                =>因为有些效果是临时的，有些是全局的

2025.11.02
bug:抽牌有问题：用过的牌会抽两次 => 定位了，是洗牌后，抽牌时出现的问题
            =>是洗牌时将牌堆重新赋值导致的，这种bug很容易发生，在操作数组时要小心！
        回合开始有问题：执行了8次 =>都是事务的问题
测试多次选择,是否正确留下了线条
    =>在faction为all时有问题，单一faction也没能选择多次
    =>重新理一下监听和点击事件
        =>只有可以选择的对象可以响应click选中事件，点击外部【不会】取消选择
测试无需选择,主要是测试选择的对象是否正确=>done


2025.10.31
添加了事务队列，用于顺序处理同步的非关联事件的执行和整理
bug:【末日】选择后留下了线条=>done
    某次选择后下一次尝试选择没有出现线条=>未能成功复现
    【活动肌肉】仍然需要选择=>没有做getStatus导致的

2025.10.30
全局(all)选择框，测试全局选择，抽了选择框组件，修复了报错函数，返回never表示不会有继续的内容了，修复默认选择的阵营为all的bug

2025.10.29
事件的阶段phase，按阶段执行，阶段之间通过返回值交互
    =>不同阶段之间的三要素不同怎么办？是否明确同一个事件中的来源和媒介一致？
    =>覆写?
    =>不对，应该把消耗费用和丢弃卡牌做成一个独特的效果，内容是让来源丢弃卡牌
interaction的使用，卡牌的使用全流程理顺=>use效果需要事件的phase支持=>大致做完啦！就是一些效果需要单独做了
阵营的选择框,测试阵营选择=>done

2025.10.28
选择目标方法做完了
bug：活动肌肉卡牌的对象选择事件有问题=>示例函数把之前的定义覆盖了

2025.10.23
事件的阶段phase，主要作用时存储阶段的返回值在特定key值上，以及获取对应的key值作为参数 