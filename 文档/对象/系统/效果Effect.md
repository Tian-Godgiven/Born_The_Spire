# 效果Effect

可以这么说，一切会对实体本身产生影响的事件，其都是效果产生的结果。
理论上来讲，我们应该且仅应该通过效果来对实体产生影响。

效果涉及到3个概念，其相互依赖组成游戏的效果Effect系统

## 效果函数 effectFunction

效果函数是效果“起效时”时调用的函数；其接受统一的参数，对设定的目标产生固定的影响，以达到期望的效果，返回可预见的结果；

例如：某个效果能够“造成3点伤害”，那么这个效果对应地会调用“造成伤害”的效果函数;

## 效果对象 Effect

效果对象是在游戏进程中，为系统服务的工具对象，其记录了效果有关的各种信息、参数和效果函数；游戏系统通过处理效果对象→调用效果函数来产生效果

效果对象会被特殊地记录在log日志中
效果对象还会被过程事件所携带，从而在事件过程中被修改，以实现一些独特的与效果交互的效果；

## 效果单元 effectUnit

效果单元是游戏的数据存储在JSON中时表达效果作用的存储型对象；其中包含效果关键字，效果的参数等数据。
某个效果的效果单元结构应当是可预测的（即同一个效果的效果单元应该长成一个样子）

效果对象并不直接存在于游戏中，而是通过效果单元生成的；

例如：卡牌[打击]会“造成6点伤害”，那么这张卡牌的“打出触发器”会携带效果单元“damage（造成伤害）”，该卡牌被打出时会发生一个事件，在这个事件被创建时，系统会根据效果单元同步创建一个效果对象

效果单元是唯一的，且应当是唯一的。一般情况下，我们通过效果关键字寻找指定的效果函数，从而创建效果对象；

通过效果map将效果关键字和效果函数连接起来；

再次梳理一下三者的关系

效果单元--[生成]-->效果对象--[调用]-->效果函数--[关联]-->效果单元