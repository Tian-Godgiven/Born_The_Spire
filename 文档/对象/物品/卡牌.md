[toc]

# 卡牌

卡牌是角色在回合中的行动媒介，需要消耗相应的【能量】才能打出产生效果。每回合开始时抽一定数量的卡牌，回合结束时弃掉剩余的所有手牌。

打出卡牌时，会将卡牌移动到弃牌堆

## 相关交互

### 继承

get：获得卡牌(不包含临时获取)时的效果
use：使用卡牌时的效果
lost：失去卡牌(不包含失去临时获取的卡牌)时的效果

### 独特

drawFromPile：从牌堆中抽到这张卡牌时的效果
drawToHand：这张卡牌移动到手牌时的效果
discardCard：丢弃这张卡牌时的效果

## 操作与分析

使用卡牌分为：选中卡牌=>卡牌瞄准目标=>卡牌use效果触发3个阶段
其中卡牌瞄准目标使用一个单独的aim方法来处理瞄准过程中的选择范围改变，例如卡牌的use效果可以覆盖所有敌人时，aim将会返回"all",从而使得前端显示时目标选择框放大到敌方整体，并且此时直接释放按键也可以触发卡牌效果。
此外，若此时场上只有1个可选目标单位，也可以自动瞄准目标

## 获取

- 一部分器官会向牌堆中添加一定数量的卡牌，这些卡牌与器官本身绑定，失去器官同时也会失去对应的卡牌，器官损坏时，相应的卡牌无法被打出。
- 一部分事件的选项会向牌堆中添加卡牌
- 一部分效果会添加卡牌，其中包括仅在当前战斗中添加等类型

## 移除

- 一部分事件的选项可以从牌堆中移除卡牌，即使这张卡牌由器官提供
- 一部分效果能够移除卡牌，其中也包含仅在当前战斗中移除的类型

## 词条

词条是卡牌的装饰器的一种，会影响卡牌的一系列行为，卡牌获得词条时，也会获得对应的触发器

例如拥有“消耗”词条会在卡牌使用后，将其移至消耗堆而非弃牌堆
”虚无“词条会在回合结束时，处理手牌之前，“虚无”词条的卡牌会被移至消耗堆

在上述因词条而产生变化的行为中，这些行为的媒介medium通常就是持有词条的卡牌本身