# 选择目标

物品等对象在使用时可能需要选择目标，该过程根据对象的交互行为进行处理。

# 该过程涉及的对象包括

1.选择链条

选中来源后，会以这个选中来源为起始点显示一根链条，链条末端跟随鼠标，并可以选中目标

2.选择框

选择链条的末端移入某个可选目标时，将会在该目标周围显示一个选择框，以表示当前将会选中该目标。
大概有3中类型的选择框：
    1.单个目标：包围在目标周围的方形框
    2.某一阵营的所有目标：包围在阵营容器周围的方形框
    3.所有目标：包围整个场地的方形框

## 过程

选择目标的过程大致分为3个阶段

1.选中来源
    这些来源会具备一个标识“chooseSource”，此外根据选中的方式会获取到来源的不同交互Interaction（参见object/item）
2.根据交互的值，判断选择的目标将会是什么，并产生选择链条，有如下可能
    1.不需要选择目标:即可能存在的目标必定满足交互的选择条件，此时仍然会显示选择链条和选择框，但即使不选中目标也可以直接完成交互
        例如key:self表示该次交互的选择对象是来源自身，因此无需选择目标；
        又例如number:1，faction:enemy表示选择1个敌人，且此时场上只剩一个敌人，则可能存在的目标必定满足选择条件，默认将会选择这个目标
    2.需要选择目标：
        1.根据交互指定的阵营，决定该次选择可以确定的对象
            例如faction:enemy时，该次选择只可以确定在敌人上
            又例如faction为null或any时，该次选择可以确定在任意类型上
        2.根据交互指定的数量，决定该次选择需要进行多少次
            例如number:1时，该次选择会产生1次选择链条
            例如number:3时，该次选择会在选中目标后，再次产生选择链条，直到选中3次目标
            例如number:"all"时，该次选择的选择框会覆盖所有指定阵营的对象，选择链条将会指向该选择框
                如果不限制选择阵营，此时的效果将类似“不需要选择目标”
3.选中目标
    移动选择鼠标以使得选择链条末端进入某个选择框，此时点击鼠标左键即可选中指定的目标，这些目标将会传递给对象以完成对应的交互。
    如果在这一步的任意时刻点击鼠标右键，即会取消选中来源，以使得选择链条消失
